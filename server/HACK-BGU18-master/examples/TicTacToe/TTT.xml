<mxGraphModel dx="1186" dy="792" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#ffffff"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;jettySize=auto;orthogonalLoop=1;" parent="1" source="2" target="17" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;entryPerimeter=0;jettySize=auto;orthogonalLoop=1;" parent="1" source="2" target="53" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;entryPerimeter=0;jettySize=auto;orthogonalLoop=1;" parent="1" source="2" target="58" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;entryPerimeter=0;jettySize=auto;orthogonalLoop=1;" parent="1" source="2" target="64" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><object label="START" type="context" name="n1" placeholders="1" code="" id="2"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="50" y="170" width="98" height="40" as="geometry"/></mxCell></object><mxCell id="50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;jettySize=auto;orthogonalLoop=1;" parent="1" source="17" target="46" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><object label="Wait: Click(*,*)" type="node" name="nod1" placeholders="1" code="var click= bp.EventSet( &quot;click&quot;, function(ev){&#10;  var e = JSON.parse(ev.name);&#10;  return e.name.startsWith(&quot;Click&quot;);&#10;});&#10;&#10;&#10;var e = bp.sync({ waitFor:  click})&#10;ctx.lastEvent = JSON.parse(e.name);" id="17"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="230" y="170" width="100" height="40" as="geometry"/></mxCell></object><object label="Request: X(r,c)" type="node" name="nod2" placeholders="1" code="var e = {name:&quot;X&quot;, col: ctx.lastEvent.col, row: ctx.lastEvent.row};&#10;bp.sync({request: bp.Event(JSON.stringify(e))});&#10;" id="46"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="430" y="170" width="100" height="40" as="geometry"/></mxCell></object><mxCell id="52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;jettySize=auto;orthogonalLoop=1;exitX=1;exitY=0.5;" parent="1" source="17" target="17" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="340" y="190"/><mxPoint x="340" y="150"/><mxPoint x="210" y="150"/><mxPoint x="210" y="190"/></Array></mxGeometry></mxCell><object label="Request: O(*,*)" type="node" name="nod2" placeholders="1" code="var events = [];&#10;&#10;for (var r = 0; r &lt; 3; r++) {&#10;  for (var c = 0; c &lt; 3; c++) {&#10;    events.push(&#10;      bp.Event(JSON.stringify({&#10;        name: &quot;O&quot;,&#10;        row: r,&#10;        col: c&#10;      })));&#10;  }&#10;}&#10;&#10;bp.sync({request: events});" id="53"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="230" y="280" width="100" height="40" as="geometry"/></mxCell></object><mxCell id="55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;jettySize=auto;orthogonalLoop=1;exitX=1;exitY=0.5;" parent="1" source="53" target="53" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="350" y="300"/><mxPoint x="350" y="260"/><mxPoint x="210" y="260"/><mxPoint x="210" y="300"/></Array><mxPoint x="330" y="290" as="sourcePoint"/><mxPoint x="220" y="290" as="targetPoint"/></mxGeometry></mxCell><mxCell id="61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;entryPerimeter=0;jettySize=auto;orthogonalLoop=1;" parent="1" source="58" target="60" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><object label="W: X, B:O" type="node" name="turns1" placeholders="1" code="var Os = bp.EventSet(&quot;Os&quot;, function(ev) {&#10;&#9;var e = JSON.parse(ev.name);&#10;&#10;&#9;return e.name == &quot;O&quot;;&#10;});&#10;&#10;&#10;var Xs = bp.EventSet(&quot;Xs&quot;, function(ev) {&#10;&#9;var e = JSON.parse(ev.name);&#10;&#10;&#9;return e.name == &quot;X&quot;;&#10;});&#10;&#10;bp.sync({&#10;&#9;waitFor: Xs,&#10;&#9;block: Os&#10;});" id="58"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="210" y="370" width="100" height="40" as="geometry"/></mxCell></object><mxCell id="63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;jettySize=auto;orthogonalLoop=1;entryX=0;entryY=0.5;entryPerimeter=0;exitX=1;exitY=0.5;exitPerimeter=0;" parent="1" source="60" target="58" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="200" y="390" as="targetPoint"/><mxPoint x="520" y="410" as="sourcePoint"/><Array as="points"><mxPoint x="490" y="390"/><mxPoint x="490" y="350"/><mxPoint x="190" y="350"/><mxPoint x="190" y="390"/></Array></mxGeometry></mxCell><object label="W: O, B:X" type="node" name="turns1" placeholders="1" code="var Os = bp.EventSet(&quot;Os&quot;, function(ev) {&#10;&#9;var e = JSON.parse(ev.name);&#10;&#10;&#9;return e.name == &quot;O&quot;;&#10;});&#10;&#10;&#10;var Xs = bp.EventSet(&quot;Xs&quot;, function(ev) {&#10;&#9;var e = JSON.parse(ev.name);&#10;&#10;&#9;return e.name == &quot;X&quot;;&#10;});&#10;&#10;bp.log.info('waiting for Os');&#10;&#10;bp.sync({&#10;&#9;waitFor: Os,&#10;&#9;block: Xs&#10;});" id="60"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="380" y="370" width="100" height="40" as="geometry"/></mxCell></object><mxCell id="67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;jettySize=auto;orthogonalLoop=1;" parent="1" source="64" target="66" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><object label="Wait: O or X" type="node" name="nod1" placeholders="1" code="var ox= bp.EventSet( &quot;OX&quot;, function(ev){&#10;  var e = JSON.parse(ev.name);&#10;  return e.name == &quot;X&quot; || e.name == &quot;O&quot;;&#10;});&#10;&#10;&#10;var e = bp.sync({ waitFor:  ox})&#10;ctx.lastEvent = JSON.parse(e.name);" id="64"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="210" y="480" width="100" height="40" as="geometry"/></mxCell></object><object label="Block O, X in the same square" type="node" name="nod2" placeholders="1" code="var col = ctx.lastEvent.col;&#10;var row = ctx.lastEvent.row;&#10;&#10;var sq = bp.EventSet( &quot;sq&quot;, function(ev){&#10;  var e = JSON.parse(ev.name);&#10;  return (e.name == &quot;X&quot; || e.name == &quot;O&quot;) &amp;&amp; &#10;    e.row == row &amp;&amp;&#10;    e.col == col;&#10;&#10;});&#10;&#10;bp.sync({block: sq});" id="66"><mxCell style="shape=flow.node;whiteSpace=wrap;html=1;fillColor=#C3ABD0;strokeColor=#000000;strokeWidth=2;shadow=1;" parent="1" vertex="1"><mxGeometry x="375" y="480" width="100" height="40" as="geometry"/></mxCell></object><mxCell id="68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=0;entryY=0.5;entryPerimeter=0;jettySize=auto;orthogonalLoop=1;" parent="1" source="64" target="64" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="330" y="500"/><mxPoint x="330" y="460"/><mxPoint x="190" y="460"/><mxPoint x="190" y="500"/></Array></mxGeometry></mxCell></root></mxGraphModel>